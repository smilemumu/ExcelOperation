webpackJsonp([3],{"2ODQ":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("T452"),i=e("mtWM"),s=e.n(i),n=e("mw3O"),o=e.n(n);var c=l.c+"/Archives/export";function d(t){var a=l.c+"/Archives/update";return s.a.post(a,o.a.stringify(t))}var r={name:"fileDetail",mounted:function(){this._search()},methods:{_search:function(){var t=this;(function(t){var a=l.c+"/Archives/search";return s.a.post(a,o.a.stringify(t))})({page:this.page,concatField:this.concatField}).then(function(a){a.data.status===l.a?(t.tableData=a.data.data,t.pageCount=a.data.pageCount):(t.tableData=[],t.pageCount=1)})},changePage:function(t){this.page=t,this._search()},exportIP:function(t){this.time||(this.time=["",""]);var a=c+"?id = "+this.id+"\n      + &fileId = "+this.fileId+"\n      + &responsePerson = "+encodeURIComponent(this.responsePerson)+"\n      + &title = "+encodeURIComponent(this.title)+"\n      + &level = "+this.level+"\n      + &start = "+this.time[0]+"\n      + &end = "+this.time[1]+"\n      + &note = "+encodeURIComponent(this.note)+"\n      + &fileType = "+this.fileType+"\n      + &concatField = "+encodeURIComponent(this.concatField);t.target.href=a},importFile:function(t){var a=this,e=new FormData;e.append("file",t.target.files[0]),e.append("fileType",this.fileType);var i={headers:{"Content-Type":"multipart/form-data"}};(function(t,a){var e=l.c+"/Archives/importExcel";return s.a.post(e,t,a)})(e,i).then(function(t){t.data.status===i.ERR_OK?(a.page=1,a._search(),a.insertShow=!1,a.$msgbox({type:"info",message:t.data.msg})):a.$alert(t.data.msg,"提示")}),document.getElementById("file").value=""},softDelete:function(){},handleSelectionChange:function(t){this.multipleSelection=t},_insertClick:function(){var t=this;(function(t){var a=l.c+"/Archives/insert";return s.a.post(a,o.a.stringify(t))})({id:this.dialogData.id,fileId:this.dialogData.fileId,rollId:this.dialogData.rollId,responsePerson:this.dialogData.responsePerson,title:this.dialogData.title,level:this.dialogData.level,date:this.dialogData.date,secretDate:this.dialogData.secretDate,note:this.dialogData.note,fileType:this.dialogData.fileType,pageCount:this.dialogData.pageCount}).then(function(a){a.data.status===l.a?(t.page=1,t._search(),t.$msgbox({type:"info",message:a.data.msg})):t.$alert(a.data.msg,"提示")})},_updateClick:function(){var t=this;d({id:this.dialogData.id,fileId:this.dialogData.fileId,rollId:this.dialogData.rollId,responsePerson:this.dialogData.responsePerson,title:this.dialogData.title,level:this.dialogData.level,date:this.dialogData.date,secretDate:this.dialogData.secretDate,note:this.dialogData.note,fileType:this.dialogData.fileType,pageCount:this.dialogData.pageCount}).then(function(a){a.data.status===l.a?(t.page=1,t._search(),t.$msgbox({type:"info",message:a.data.msg})):t.$alert(a.data.msg,"提示")})},openDialog:function(){this.dialogData={id:"",fileId:"",rollId:"",responsePerson:"",title:"",level:"",date:"",secretDate:"",note:"",fileType:"",pageCount:""}},changeNote:function(t,a){var e=this;d({virtualId:a,note:t}).then(function(t){t.data.status===l.a?(e._search(),e.$msgbox({type:"info",message:"备注修改成功"})):e.$alert("修改失败","提示")})}},data:function(){return{superShow:localStorage.getItem("super")||!1,insertShow:!1,updateShow:!1,dialogData:{id:"",fileId:"",rollId:"",responsePerson:"",title:"",level:"",date:"",secretDate:"",note:"",fileType:"",pageCount:""},file:"",isShow:!1,page:1,pageCount:1,concatField:"",fileId:"",virtualId:"",id:"",responsePerson:"",title:"",level:"",time:"",note:"",fileType:"",levelOptions:[{value:"",label:"请选择"},{value:"绝密",label:"绝密"},{value:"机密",label:"机密"},{value:"秘密",label:"秘密"},{value:"一般",label:"一般"}],fileTypeOptions:[{value:"",label:"请选择"},{value:"县级文件",label:"县级文件"},{value:"内部传真",label:"内部传真"},{value:"机要文件",label:"机要文件"},{value:"密码电报",label:"密码电报"},{value:"县局文件",label:"县局文件"}],tableData:[],multipleSelection:[]}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"detail-container"},[e("div",{staticClass:"search"},[e("div",{staticClass:"concatField"},[e("el-input",{attrs:{placeholder:"请输入关键字",clearable:""},nativeOn:{keyup:function(a){t._search()}},model:{value:t.concatField,callback:function(a){t.concatField=a},expression:"concatField"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t._search()}}},[t._v("搜索")]),t._v(" "),e("el-button",{attrs:{type:"warning"},on:{click:function(a){t.isShow=!t.isShow}}},[t._v(" 精确搜索")]),t._v(" "),e("ul",{staticClass:"list_menu"},[e("li",{directives:[{name:"show",rawName:"v-show",value:"true"==t.superShow,expression:"superShow == 'true'"}],on:{click:function(a){t.insertShow=!0}}},[t._v("新增")]),t._v(" "),e("li",{directives:[{name:"show",rawName:"v-show",value:"true"==t.superShow,expression:"superShow == 'true'"}],on:{click:function(a){t.updateShow=!0}}},[t._v("更新")]),t._v(" "),e("li",{on:{click:function(a){t.softDelete()}}},[t._v("删除")]),t._v(" "),e("li",[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){t.exportIP(a)}}},[t._v("导出")])]),t._v(" "),e("li",[e("span",[t._v("\n            导入\n            "),e("input",{staticClass:"inputstyle",attrs:{type:"file",id:"file",title:"请选择.excel"},on:{change:function(a){t.importFile(a)}}})])])])],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[t.isShow?e("div",{staticClass:"detail_father"},[e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("虚拟id：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.virtualId,callback:function(a){t.virtualId=a},expression:"virtualId"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("id：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.id,callback:function(a){t.id=a},expression:"id"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文号：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.fileId,callback:function(a){t.fileId=a},expression:"fileId"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("题名：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.title,callback:function(a){t.title=a},expression:"title"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("责任人：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.responsePerson,callback:function(a){t.responsePerson=a},expression:"responsePerson"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("备注：")]),t._v(" "),e("el-input",{staticClass:"detail-input",nativeOn:{keyup:function(a){t._search()}},model:{value:t.note,callback:function(a){t.note=a},expression:"note"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("秘级：")]),t._v(" "),e("el-select",{staticClass:"detail-input",attrs:{placeholder:"请选择"},on:{change:function(a){t._search()}},model:{value:t.level,callback:function(a){t.level=a},expression:"level"}},t._l(t.levelOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文件类型：")]),t._v(" "),e("el-select",{staticClass:"detail-input",attrs:{placeholder:"请选择"},on:{change:function(a){t._search()}},model:{value:t.fileType,callback:function(a){t.fileType=a},expression:"fileType"}},t._l(t.fileTypeOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"block"},[e("span",{staticClass:"input-label"},[t._v("起始时间：")]),t._v(" "),e("el-date-picker",{staticClass:"detail-input",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(a){t._search()}},model:{value:t.time,callback:function(a){t.time=a},expression:"time"}})],1)])]):t._e()])],1),t._v(" "),e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"virtualId",label:"序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"id",label:"档号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rollId",label:"卷号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"fileId",label:"文号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"responsePerson",label:"责任者"}}),t._v(" "),e("el-table-column",{attrs:{prop:"title",label:"题名"},scopedSlots:t._u([{key:"default",fn:function(a){return["red"==a.row.fileColor?e("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(a.row.title))]):"blue"==a.row.fileColor?e("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(a.row.title))]):"green"==a.row.fileColor?e("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(a.row.title))]):"yellow"==a.row.fileColor?e("span",{staticStyle:{color:"#E6A23C"}},[t._v(t._s(a.row.title))]):e("span",[t._v(t._s(a.row.title))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"level",label:"密级"}}),t._v(" "),e("el-table-column",{attrs:{prop:"pageCount",label:"页数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"secretDate",label:"保密年限(年)",width:"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"note",label:"备注",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.changeNote(a.row.virtualId,a.row.id)}},model:{value:a.row.note,callback:function(e){t.$set(a.row,"note",e)},expression:"scope.row.note"}})]}}])})],1)],1),t._v(" "),e("div",{staticClass:"page"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pageCount},on:{"current-change":t.changePage}})],1),t._v(" "),e("div",{staticClass:"dialog"},[e("el-dialog",{attrs:{visible:t.insertShow,title:"新增"},on:{"update:visible":function(a){t.insertShow=a},open:t.openDialog}},[e("div",{staticClass:"detail_father"},[e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("id：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.id,callback:function(a){t.$set(t.dialogData,"id",a)},expression:"dialogData.id"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文号：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.fileId,callback:function(a){t.$set(t.dialogData,"fileId",a)},expression:"dialogData.fileId"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("卷号：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.rollId,callback:function(a){t.$set(t.dialogData,"rollId",a)},expression:"dialogData.rollId"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("责任人：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.responsePerson,callback:function(a){t.$set(t.dialogData,"responsePerson",a)},expression:"dialogData.responsePerson"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("题名：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.title,callback:function(a){t.$set(t.dialogData,"title",a)},expression:"dialogData.title"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("页数：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.pageCount,callback:function(a){t.$set(t.dialogData,"pageCount",a)},expression:"dialogData.pageCount"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("日期：")]),t._v(" "),e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.dialogData.date,callback:function(a){t.$set(t.dialogData,"date",a)},expression:"dialogData.date"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("保密年限：")]),t._v(" "),e("el-input",{staticClass:"detail-input",attrs:{type:"number"},model:{value:t.dialogData.secretDate,callback:function(a){t.$set(t.dialogData,"secretDate",a)},expression:"dialogData.secretDate"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("备注：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.note,callback:function(a){t.$set(t.dialogData,"note",a)},expression:"dialogData.note"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文件类型：")]),t._v(" "),e("el-select",{staticClass:"detail-input",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogData.fileType,callback:function(a){t.$set(t.dialogData,"fileType",a)},expression:"dialogData.fileType"}},t._l(t.fileTypeOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("密级：")]),t._v(" "),e("el-select",{staticClass:"detail-input",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogData.level,callback:function(a){t.$set(t.dialogData,"level",a)},expression:"dialogData.level"}},t._l(t.levelOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1)])]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.insertShow=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t._insertClick}},[t._v("确 定")])],1)])],1),t._v(" "),e("div",{staticClass:"dialog"},[e("el-dialog",{attrs:{visible:t.updateShow,title:"更新"},on:{"update:visible":function(a){t.updateShow=a},open:t.openDialog}},[e("div",{staticClass:"detail_father"},[e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("id：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.id,callback:function(a){t.$set(t.dialogData,"id",a)},expression:"dialogData.id"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文号：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.fileId,callback:function(a){t.$set(t.dialogData,"fileId",a)},expression:"dialogData.fileId"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("卷号：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.rollId,callback:function(a){t.$set(t.dialogData,"rollId",a)},expression:"dialogData.rollId"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("责任人：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.responsePerson,callback:function(a){t.$set(t.dialogData,"responsePerson",a)},expression:"dialogData.responsePerson"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("题名：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.title,callback:function(a){t.$set(t.dialogData,"title",a)},expression:"dialogData.title"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("页数：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.pageCount,callback:function(a){t.$set(t.dialogData,"pageCount",a)},expression:"dialogData.pageCount"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("日期：")]),t._v(" "),e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.dialogData.date,callback:function(a){t.$set(t.dialogData,"date",a)},expression:"dialogData.date"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("保密年限：")]),t._v(" "),e("el-input",{staticClass:"detail-input",attrs:{type:"number"},model:{value:t.dialogData.secretDate,callback:function(a){t.$set(t.dialogData,"secretDate",a)},expression:"dialogData.secretDate"}})],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("备注：")]),t._v(" "),e("el-input",{staticClass:"detail-input",model:{value:t.dialogData.note,callback:function(a){t.$set(t.dialogData,"note",a)},expression:"dialogData.note"}})],1)]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("文件类型：")]),t._v(" "),e("el-select",{staticClass:"detail-input",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogData.fileType,callback:function(a){t.$set(t.dialogData,"fileType",a)},expression:"dialogData.fileType"}},t._l(t.fileTypeOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1),t._v(" "),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"input-label"},[t._v("密级：")]),t._v(" "),e("el-select",{staticClass:"detail-input",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogData.level,callback:function(a){t.$set(t.dialogData,"level",a)},expression:"dialogData.level"}},t._l(t.levelOptions,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1)])]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.updateShow=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t._updateClick}},[t._v("确 定")])],1)])],1)])},staticRenderFns:[]};var u=e("VU/8")(r,p,!1,function(t){e("7WTT")},"data-v-6b59d6a0",null);a.default=u.exports},"7WTT":function(t,a){}});
//# sourceMappingURL=3.7b089c99642e69c7bbed.js.map